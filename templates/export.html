<!doctype html>
<html lang="ko">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>내보내기</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}" />
  </head>
  <body class="page">
    <div class="card wide">
      <div class="row">
        <h1 class="title">내보내기 / 백업</h1>
        <a class="link" href="{{ url_for('index') }}">메인으로</a>
      </div>
      <p class="sub">내보내기 파일 다운로드와 GitHub 자동 백업/복원을 한 곳에서 관리합니다.</p>

      <section class="export-section">
        <h2 class="section-title">대화 내보내기</h2>
        <div class="export-actions">
          <a class="btn-link" href="{{ url_for('admin_export_chat', format='txt') }}">TXT</a>
          <a class="btn-link" href="{{ url_for('admin_export_chat', format='kakao') }}">카카오 TXT</a>
          <a class="btn-link" href="{{ url_for('admin_export_chat', format='csv') }}">CSV</a>
        </div>
      </section>

      <section class="export-section">
        <h2 class="section-title">일기 내보내기</h2>
        <div class="export-actions">
          <a class="btn-link" href="{{ url_for('diary_export', format='txt') }}">TXT</a>
          <a class="btn-link" href="{{ url_for('diary_export', format='csv') }}">CSV</a>
          <a class="btn-link" href="{{ url_for('diary_export', format='md') }}">MD</a>
        </div>
      </section>

      <section class="export-section">
        <h2 class="section-title">추억(사진) 내보내기</h2>
        <div class="export-actions">
          <a class="btn-link" href="{{ url_for('admin_export_memories', format='csv') }}">CSV</a>
          <a class="btn-link" href="{{ url_for('admin_export_memories', format='txt') }}">TXT</a>
        </div>
      </section>

      <section class="export-section">
        <h2 class="section-title">GitHub 백업</h2>
        <p class="sub">자동 백업 파일: <code>&lt;CHAT_APP_GITHUB_BACKUP_PREFIX&gt;.txt</code>, <code>&lt;CHAT_APP_GITHUB_BACKUP_PREFIX&gt;_diary.txt</code></p>
        <div class="export-actions">
          <form method="post" action="{{ url_for('admin_backup_run') }}">
            <button type="submit" class="btn-link">지금 백업 실행</button>
          </form>
          <form method="post" action="{{ url_for('admin_backup_restore') }}" onsubmit="return confirm('GitHub 백업 파일로 현재 DB를 복원합니다. 계속할까요?');">
            <button type="submit" class="btn-link">GitHub 백업 복원</button>
          </form>
        </div>
      </section>
    </div>
    {% include "_auth_guard.html" %}
  </body>
</html>
